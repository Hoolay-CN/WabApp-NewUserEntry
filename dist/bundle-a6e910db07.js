!function(e){function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){var i=t(1),a=(t(2),t(3)),o=t(4),r=t(6),c=t(5),s=new i({modalTitle:"胡来网",onPageInit:function(e,n){"index"===n.name&&setTimeout(function(){l.router.load({pageName:"userentry",query:r.parse(location.search)})},444);var t=null;c.hasOwnProperty(n.name)&&(t=c[n.name],o.isPlainObject(t)&&t.hasOwnProperty("pageAfterInit")&&t.pageAfterInit.call(s,n))},onPageBeforeInit:function(e,n){var t=null;c.hasOwnProperty(n.name)&&(t=c[n.name],o.isFunction(t)&&t.call(s,n),o.isPlainObject(t)&&t.hasOwnProperty("pageBeforeInit")&&t.pageBeforeInit.call(s,n))},onAjaxStart:function(){}}),l=s.addView(".view-main",{domCache:!0,dynamicNavbar:!0});a.App=s,a.mainView=l},function(e){e.exports=Framework7},function(e){e.exports=Dom7},function(e){e.exports={}},function(e){e.exports=jQuery},function(e,n,t){var i={};i.userentry=t(7),i.userentrydone=t(8),e.exports=i},function(e,n,t){"use strict";var i=t(14);n.extract=function(e){return e.split("?")[1]||""},n.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,n){var t=n.replace(/\+/g," ").split("="),i=t[0],a=t[1];return i=decodeURIComponent(i),a=void 0===a?null:decodeURIComponent(a),e.hasOwnProperty(i)?Array.isArray(e[i])?e[i].push(a):e[i]=[e[i],a]:e[i]=a,e},{}):{})},n.stringify=function(e){return e?Object.keys(e).sort().map(function(n){var t=e[n];return Array.isArray(t)?t.sort().map(function(e){return i(n)+"="+i(e)}).join("&"):i(n)+"="+i(t)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,n,t){var i=t(3),a=t(15),o=t(2),r=t(9),c=t(10),s=t(11),l=t(12),u=t(16),p=t(4),d=r.define({$id:"vmUserentry",data:{name:"",gender:"",avatar:"",location:"",college_id:0,phone:"",email:"",password:"",code:""},submitHandler:function(){var e=r.mix({},d.data.$model);return delete e.avatar,!0===u(e).reduce(function(e,n){return this.isLeaf&&e.push(n),e},[]).some(function(e){return!e})?void i.App.alert("Oops，请检查信息是否完善"):(i.App.showPreloader("处理中..."),void c.codeCompletion(d.data.$model,function(e){e&&(p(document.documentElement).hasClass("ios")?window.location.href="https://itunes.apple.com/cn/app/hu-lai-wang-yi-shu-jia-ban/id966069685":i.App.alert("账号设置完成，马上登录胡来网（www.hoolay.cn）管理您的作品。"))},function(e){return e.message?void("string"==typeof e.message?i.App.alert(e.message):p.isPlainObject(e.message)&&u(e.message).forEach(function(e){this.isRoot||i.App.alert(e)})):void i.App.alert("保存失败，请稍后再试试吧")}).always(function(){i.App.hidePreloader()}))},collegesSelectHandler:function(){d.data.college_id=o(this).val()},locationSelectHandler:function(){d.data.location=o(this).val()},smartGender:function(){return"f"==d.data.gender?"女":"m"==d.data.gender?"男":"未设置"},smartAvatar:function(){return d.data.avatar?d.data.avatar+"!200x200?v="+(new Date).getTime():"data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA="}});d.data.$watch("code",function(e){i.App.showPreloader("验证中..."),c.codeConfirmation({code:e},function(e){e&&(e=e.user)&&u(d.data.$model).forEach(function(){this.isRoot||e.hasOwnProperty(this.key)&&(d.data[this.key]=e[this.key])})},function(e){e&&"string"==typeof e.message&&i.App.alert(e.message)}).always(function(){i.App.hidePreloader()})}),e.exports.pageBeforeInit=function(e){var n=o(e.container).find(".page-content");n.html(a)},e.exports.pageAfterInit=function(e){var n=o(e.container).find("select[name=colleges]"),t=o(e.container).find("select[name=location]");c.getAllColleges(null,function(e){e&&e.forEach(function(e){i.App.smartSelectAddOption(n,'<option value="'+e.id+'">'+e.name+"</option>")})}),s.forEach(function(e){i.App.smartSelectAddOption(t,'<optgroup label="'+e.name+'">'+(e=e.cities.map(function(e){return'<option value="'+e+'">'+e+"</option>"}),e.join(""))+"</optgroup>")}),c.getBuckets(null,function(n){if(!n)return!1;var t=l.create({server:"http://v0.api.upyun.com/"+n[0].bucket,pick:"#avatar_picker",resize:!0,formData:n[0],auto:!0,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"}});t.on("uploadSuccess",function(e,t){"200"==t.code&&(d.data.avatar=n[0].prefix+t.url)}).on("startUpload",function(){i.App.showPreloader("上传中...")}).on("uploadFinished",function(){i.App.hidePreloader()}).on("uploadError",function(e,n){alert(n)});var a=1;p("#avatar_picker").on("click",function(e){e.target&&"label"===e.target.nodeName.toLowerCase()&&++a,a>=4&&i.App.alert("是不是上传头像遇到问题，您可以尝试在浏览器中打开或者暂时不设置头像，完成基本设置后，可以下载【胡来伙伴APP】，获得更好的体验:)")}),r.scan(e.container),e.query.code?d.data.code=e.query.code:i.App.alert("非法验证")})}},function(e,n,t){var i=(t(3),t(9),t(2)),a=t(13),o=null;e.exports=function(e){var n=i(e.container),t=n.find(".page-content");o||(o=a.compile(t.html())),t.html(o({query:JSON.stringify(e.query)}))}},function(e){e.exports=avalon},function(e,n,t){function i(e,n){return r.isPlainObject(n)&&!r.isEmptyObject(n)&&r.each(n,function(n,t){e=e.replace(":"+n,t)}),e}function a(e,n){return function(t,a,o,s){var l=e,u=arguments.callee;return r.isFunction(t)&&(a=t,t=[]),u.hasOwnProperty("_bindParams")&&(l=i(e,u._bindParams),delete u._bindParams),r.ajax(r.extend({dataType:"json",url:/^http/.test(l)?l:c+l,data:t,type:n||"get",beforeSend:function(e,n){return r.isFunction(n._beforeSend)?n._beforeSend.apply(this,[e,n]):void 0},statusCode:{400:function(e){var n;try{n=e.responseJSON,n.error=400,r.isFunction(o)&&o.call(null,n)}catch(t){}},401:function(){var e={message:"Unauthorized"};try{e.error=401,r.isFunction(o)&&o.call(null,e)}catch(n){}},500:function(){alert("服务器开小差了..")},404:function(){alert("访问资源不存在..")}},success:function(e){e&&e.error?r.isFunction(o)&&o.call(null,e):r.isFunction(a)&&a.call(null,e)}},s||{}))}}function o(e){r.isPlainObject(e)&&!r.isEmptyObject(e)?r.each(e,function(e,t){n[e]=a.apply(null,t)}):r.error("error api config")}var r=t(4),c=null,s=/^(www|stage-h2).+$/;c=(s=location.host.match(s))?"http://"+s[1]+".hoolay.cn":"http://h2.hoolay.cc";var l={getAllColleges:["/api/user/default_colleges","get"],getBuckets:["/api/pictures/buckets","get"],codeConfirmation:["/api/user/code_confirmation","get"],codeCompletion:["/api/user/code_completion","post"]};o(l),e.exports.baseUri=c,e.exports._addRoutes=o},function(e){e.exports=[{name:"直辖市",cities:["北京","上海","天津","重庆"]},{name:"广东省",cities:["广州","汕尾","阳江","揭阳","茂名","惠州","江门","韶关","梅州","汕头","深圳","珠海","佛山","肇庆","湛江","中山","河源","清远","云浮","潮州","东莞"]},{name:"河北省",cities:["邯郸","石家庄","保定","张家口","承德","唐山","廊坊","沧州","衡水","邢台"]},{name:"山西省",cities:["朔州","忻州","太原","大同","阳泉","晋中","长治","晋城","临汾","吕梁","运城"]},{name:"内蒙古自治区",cities:["呼伦贝尔","呼和浩特","包头","乌海","乌兰察布","通辽","赤峰","鄂尔多斯","巴彦淖尔","锡林郭勒盟","兴安盟","阿拉善盟"]},{name:"辽宁省",cities:["沈阳","铁岭","大连","鞍山","抚顺","本溪","丹东","锦州","营口","阜新","辽阳","朝阳","盘锦","葫芦岛"]},{name:"吉林省",cities:["长春","吉林","延边朝鲜族自治州","四平","通化","白城","辽源","松原","白山"]},{name:"黑龙江省",cities:["哈尔滨","齐齐哈尔","鸡西","牡丹江","七台河","佳木斯","鹤岗","双鸭山","绥化","黑河","大兴安岭地区","伊春","大庆"]},{name:"江苏省",cities:["南京","无锡","镇江","苏州","南通","扬州","盐城","徐州","淮安","连云港","常州","泰州","宿迁"]},{name:"浙江省",cities:["舟山","衢州","杭州","湖州","嘉兴","宁波","绍兴","温州","丽水","金华","台州"]},{name:"安徽省",cities:["合肥","芜湖","蚌埠","淮南","马鞍山","淮北","铜陵","安庆","黄山","滁州","阜阳","宿州","巢湖","六安","亳州","池州","宣城"]},{name:"福建省",cities:["福州","厦门","宁德","莆田","泉州","漳州","龙岩","三明","南平"]},{name:"江西省",cities:["鹰潭","新余","南昌","九江","上饶","抚州","宜春","吉安","赣州","景德镇","萍乡"]},{name:"山东省",cities:["菏泽","济南","青岛","淄博","德州","烟台","潍坊","济宁","泰安","临沂","滨州","东营","威海","枣庄","日照","莱芜","聊城"]},{name:"河南省",cities:["商丘","郑州","安阳","新乡","许昌","平顶山","信阳","南阳","开封","洛阳","济源","焦作","鹤壁","濮阳","周口","漯河","驻马店","三门峡"]},{name:"湖北省",cities:["武汉","襄樊","鄂州","孝感","黄冈","黄石","咸宁","荆州","宜昌","恩施土家族苗族自治州","神农架林区","十堰","随州","荆门","仙桃","天门","潜江"]},{name:"湖南省",cities:["岳阳","长沙","湘潭","株洲","衡阳","郴州","常德","益阳","娄底","邵阳","湘西土家族苗族自治州","张家界","怀化","永州"]},{name:"海南省",cities:["海口","三亚","五指山","琼海","儋州","文昌","万宁","东方","澄迈县","定安县","屯昌县","临高县","白沙黎族自治县","昌江黎族自治县","乐东黎族自治县","陵水黎族自治县","保亭黎族苗族自治县","琼中黎族苗族自治县"]},{name:"广西壮族自治区",cities:["防城港","南宁","崇左","来宾","柳州","桂林","梧州","贺州","贵港","玉林","百色","钦州","河池","北海"]},{name:"甘肃省",cities:["兰州","金昌","白银","天水","嘉峪关","武威","张掖","平凉","酒泉","庆阳","定西","陇南","临夏回族自治州","甘南藏族自治州"]},{name:"陕西省",cities:["西安","咸阳","延安","榆林","渭南","商洛","安康","汉中","宝鸡","铜川"]},{name:"新疆维吾尔自治区",cities:["塔城地区","哈密地区","和田地区","阿勒泰地区","克孜勒苏柯尔克孜自治州","博尔塔拉蒙古自治州","克拉玛依","乌鲁木齐","石河子","昌吉回族自治州","五家渠","吐鲁番地区","巴音郭楞蒙古自治州","阿克苏地区","阿拉尔","喀什地区","图木舒克","伊犁哈萨克自治州"]},{name:"青海省",cities:["海北藏族自治州","西宁","海东地区","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","玉树藏族自治州","海西蒙古族藏族自治州"]},{name:"宁夏回族自治区",cities:["银川","石嘴山","吴忠","固原","中卫"]},{name:"四川省",cities:["成都","攀枝花","自贡","绵阳","南充","达州","遂宁","广安","巴中","泸州","宜宾","资阳","内江","乐山","眉山","凉山彝族自治州","雅安","甘孜藏族自治州","阿坝藏族羌族自治州","德阳","广元"]},{name:"贵州省",cities:["贵阳","遵义","安顺","黔南布依族苗族自治州","黔东南苗族侗族自治州","铜仁地区","毕节地区","六盘水","黔西南布依族苗族自治州"]},{name:"云南省",cities:["西双版纳傣族自治州","德宏傣族景颇族自治州","昭通","昆明","大理白族自治州","红河哈尼族彝族自治州","曲靖","保山","文山壮族苗族自治州","玉溪","楚雄彝族自治州","普洱","临沧","怒江傈傈族自治州","迪庆藏族自治州","丽江"]},{name:"西藏自治区",cities:["拉萨","日喀则地区","山南地区","林芝地区","昌都地区","那曲地区","阿里地区"]},{name:"台湾省",cities:["台北","高雄","基隆","台中","台南","新竹","嘉义"]},{name:"特别行政区",cities:["澳门特别行政区","香港特别行政区"]}]},function(e){e.exports=WebUploader},function(e){e.exports=Template7},function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}},function(e){e.exports='<div ms-controller="vmUserentry">\n<div class="list-block user-entry-list-block-a">\n  <ul class="user-entry-lists">\n    <li class="item-content avatar-item">\n      <div class="item-inner">\n        <div class="item-title">头像</div>\n        <div class="item-after">\n            <a href="javascript:;" class="thumb-link" id="avatar_picker">\n                <img ms-attr-src="{{( smartAvatar() )}}" alt="" /> \n            </a>  \n        </div>\n      </div>\n    </li>\n    <li>\n      <a href="#" class="item-link smart-select">\n      \n      </a>\n      <div class="item-content">\n        <div class="item-inner">\n          <div class="item-title label">真实姓名</div>\n          <div class="item-input">\n              <input name="name" type="text" ms-duplex="data.name" required />\n          </div>\n        </div>\n      </div>  \n    </li>\n    <li> \n      <a class="item-link smart-select" href="#" data-open-in="popup" data-back-on-select="true">\n          <!-- select -->\n          <select name="gender" ms-duplex="data.gender">\n              <option value="null">保密</option>\n              <option value="m">男</option>\n              <option value="f">女</option>\n          </select>\n          <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">性别</div>\n                <div class="item-after smart-select-value">{{smartGender()}}</div>\n              </div>\n          </div>\n      </a>\n    </li>\n    <li>\n      <a class="item-link smart-select" href="#" data-open-in="popup" data-back-on-select="true">\n          <!-- select -->\n          <select name="location" ms-change="locationSelectHandler">\n          </select>\n          <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">所在地</div>\n                <div class="item-after smart-select-value">未设置</div>\n              </div>\n          </div>\n      </a>\n    </li>\n    <li>\n         <a class="item-link smart-select" href="#" data-open-in="popup" data-back-on-select="true">\n          <!-- select -->\n          <select name="colleges" ms-change="collegesSelectHandler"> \n          </select>\n          <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">毕业院校</div>\n                <div class="item-after smart-select-value">未设置</div>\n              </div>\n          </div>\n      </a>\n    </li>\n     </ul>\n</div>\n<div class="list-block user-entry-list-block-b">\n    <ul>\n        <li>\n          <div class="item-content">\n            <div class="item-inner">\n              <div class="item-title label">手机号</div>\n              <div class="item-input">\n                  <input type="text" pattern="\\d*" ms-duplex="data.phone" name="phone" required />\n              </div>\n            </div>\n          </div>  \n        </li>\n        <li>\n          <div class="item-content">\n            <div class="item-inner">\n              <div class="item-title label">邮箱</div>\n              <div class="item-input">\n                  <input type="email" ms-duplex="data.email" required />\n              </div>\n            </div>\n          </div>  \n        </li>\n        <li>\n          <div class="item-content">\n            <div class="item-inner">\n              <div class="item-title label">密码</div>\n              <div class="item-input">\n                  <input type="password" value="" placeholder="不少于6个字符" ms-duplex="data.password" required /> \n              </div>\n            </div>\n          </div>  \n        </li>\n    </ul>\n</div>\n\n<div class="content-block" style="margin-top:0px;">\n    <a href="javascript:;" class="button button-big button-fill" ms-click="submitHandler"> \n        完成\n    </a>\n</div>\n</div>\n'},function(e){function n(e){this.value=e}function t(e,n,t){var a=[],o=[],r=!0;return function c(e){function s(){if("object"==typeof h.node&&null!==h.node){h.keys&&h.node_===h.node||(h.keys=d(h.node)),h.isLeaf=0==h.keys.length;for(var n=0;n<o.length;n++)if(o[n].node_===e){h.circular=o[n];break}}else h.isLeaf=!0,h.keys=null;h.notLeaf=!h.isLeaf,h.notRoot=!h.isRoot}var l=t?i(e):e,u={},p=!0,h={node:l,node_:e,path:[].concat(a),parent:o[o.length-1],parents:o,key:a.slice(-1)[0],isRoot:0===a.length,level:a.length,circular:null,update:function(e,n){h.isRoot||(h.parent.node[h.key]=e),h.node=e,n&&(p=!1)},"delete":function(e){delete h.parent.node[h.key],e&&(p=!1)},remove:function(e){f(h.parent.node)?h.parent.node.splice(h.key,1):delete h.parent.node[h.key],e&&(p=!1)},keys:null,before:function(e){u.before=e},after:function(e){u.after=e},pre:function(e){u.pre=e},post:function(e){u.post=e},stop:function(){r=!1},block:function(){p=!1}};if(!r)return h;s();var g=n.call(h,h.node);return void 0!==g&&h.update&&h.update(g),u.before&&u.before.call(h,h.node),p?("object"!=typeof h.node||null===h.node||h.circular||(o.push(h),s(),m(h.keys,function(e,n){a.push(e),u.pre&&u.pre.call(h,h.node[e],e);var i=c(h.node[e]);t&&v.call(h.node,e)&&(h.node[e]=i.node),i.isLast=n==h.keys.length-1,i.isFirst=0==n,u.post&&u.post.call(h,i),a.pop()}),o.pop()),u.after&&u.after.call(h,h.node),h):h}(e).node}function i(e){if("object"==typeof e&&null!==e){var n;if(f(e))n=[];else if(o(e))n=new Date(e.getTime?e.getTime():e);else if(r(e))n=new RegExp(e);else if(c(e))n={message:e.message};else if(s(e))n=new Boolean(e);else if(l(e))n=new Number(e);else if(u(e))n=new String(e);else if(Object.create&&Object.getPrototypeOf)n=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)n={};else{var t=e.constructor&&e.constructor.prototype||e.__proto__||{},i=function(){};i.prototype=t,n=new i}return m(d(e),function(t){n[t]=e[t]}),n}return e}function a(e){return Object.prototype.toString.call(e)}function o(e){return"[object Date]"===a(e)}function r(e){return"[object RegExp]"===a(e)}function c(e){return"[object Error]"===a(e)}function s(e){return"[object Boolean]"===a(e)}function l(e){return"[object Number]"===a(e)}function u(e){return"[object String]"===a(e)}var p=e.exports=function(e){return new n(e)};n.prototype.get=function(e){for(var n=this.value,t=0;t<e.length;t++){var i=e[t];if(!n||!v.call(n,i)){n=void 0;break}n=n[i]}return n},n.prototype.has=function(e){for(var n=this.value,t=0;t<e.length;t++){var i=e[t];if(!n||!v.call(n,i))return!1;n=n[i]}return!0},n.prototype.set=function(e,n){for(var t=this.value,i=0;i<e.length-1;i++){var a=e[i];v.call(t,a)||(t[a]={}),t=t[a]}return t[e[i]]=n,n},n.prototype.map=function(e){return t(this.value,e,!0)},n.prototype.forEach=function(e){return this.value=t(this.value,e,!1),this.value},n.prototype.reduce=function(e,n){var t=1===arguments.length,i=t?this.value:n;return this.forEach(function(n){this.isRoot&&t||(i=e.call(this,i,n))}),i},n.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e},n.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e},n.prototype.clone=function(){var e=[],n=[];return function t(a){for(var o=0;o<e.length;o++)if(e[o]===a)return n[o];if("object"==typeof a&&null!==a){var r=i(a);return e.push(a),n.push(r),m(d(a),function(e){r[e]=t(a[e])}),e.pop(),n.pop(),r}return a}(this.value)};var d=Object.keys||function(e){var n=[];for(var t in e)n.push(t);return n},f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},m=function(e,n){if(e.forEach)return e.forEach(n);for(var t=0;t<e.length;t++)n(e[t],t,e)};m(d(n.prototype),function(e){p[e]=function(t){var i=[].slice.call(arguments,1),a=new n(t);return a[e].apply(a,i)}});var v=Object.hasOwnProperty||function(e,n){return n in e}}]);