!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=n(1),a=(n(2),n(3)),o=n(4),r=n(6),c=n(5),s=new i({modalTitle:"胡来网",onPageInit:function(e,t){"index"===t.name&&setTimeout(function(){l.router.load({pageName:"userentry",query:r.parse(location.search)})},444);var n=null;c.hasOwnProperty(t.name)&&(n=c[t.name],o.isPlainObject(n)&&n.hasOwnProperty("pageAfterInit")&&n.pageAfterInit.call(s,t))},onPageBeforeInit:function(e,t){var n=null;c.hasOwnProperty(t.name)&&(n=c[t.name],o.isFunction(n)&&n.call(s,t),o.isPlainObject(n)&&n.hasOwnProperty("pageBeforeInit")&&n.pageBeforeInit.call(s,t))},onAjaxStart:function(){}}),l=s.addView(".view-main",{domCache:!0,dynamicNavbar:!0});a.App=s,a.mainView=l},function(e){e.exports=Framework7},function(e){e.exports=Dom7},function(e){e.exports={}},function(e){e.exports=jQuery},function(e,t,n){var i={};i.userentry=n(7),i.userentrydone=n(8),e.exports=i},function(e,t,n){"use strict";var i=n(14);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,t){var n=t.replace(/\+/g," ").split("="),i=n[0],a=n[1];return i=decodeURIComponent(i),a=void 0===a?null:decodeURIComponent(a),e.hasOwnProperty(i)?Array.isArray(e[i])?e[i].push(a):e[i]=[e[i],a]:e[i]=a,e},{}):{})},t.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var n=e[t];return Array.isArray(n)?n.sort().map(function(e){return i(t)+"="+i(e)}).join("&"):i(t)+"="+i(n)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,n){var i=n(3),a=n(15),o=n(2),r=n(9),c=n(10),s=n(11),l=n(12),u=n(16),p={"test-hoolay":"http://test-hoolay.b0.upaiyun.com","hoolay-pictrues":"http://pic.hoolay.cn"},d=r.define({$id:"vmUserentry",data:{name:"",gender:"",avatar:"",location:"",college_id:0,phone:"",email:"",password:"",code:""},submitHandler:function(){return 1==u(d.data.$model).reduce(function(e,t){return this.isLeaf&&e.push(t),e},[]).some(function(e){return!e})?void i.App.alert("Oops，请检查信息是否完善"):(i.App.showPreloader("处理中..."),void c.codeCompletion(d.data.$model,function(e){e&&i.mainView.router.load({url:"pages/userentrydone.html",query:r.mix({},d.data.$model)})},function(){i.App.alert("保存失败，请稍后再试试吧")}).always(function(){i.App.hidePreloader()}))},collegesSelectHandler:function(){d.data.college_id=o(this).val()},locationSelectHandler:function(){d.data.location=o(this).val()},smartGender:function(){return"f"==d.data.gender?"女":"m"==d.data.gender?"男":"未设置"},smartAvatar:function(){return d.data.avatar?d.data.avatar+"!200x200?v="+(new Date).getTime():"data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA="}});d.data.$watch("code",function(e){i.App.showPreloader("验证中..."),c.codeConfirmation({code:e},function(e){e&&(e=e.user)&&u(d.data.$model).forEach(function(){this.isRoot||e.hasOwnProperty(this.key)&&(d.data[this.key]=e[this.key])})},function(e){e&&"string"==typeof e.message&&i.App.alert(e.message)}).always(function(){i.App.hidePreloader()})}),e.exports.pageBeforeInit=function(e){var t=o(e.container).find(".page-content");t.html(a)},e.exports.pageAfterInit=function(e){var t=o(e.container).find("select[name=colleges]"),n=o(e.container).find("select[name=location]");c.getAllColleges(null,function(e){e&&e.forEach(function(e){i.App.smartSelectAddOption(t,'<option value="'+e.id+'">'+e.name+"</option>")})}),s.forEach(function(e){i.App.smartSelectAddOption(n,'<optgroup label="'+e.name+'">'+(e=e.cities.map(function(e){return'<option value="'+e+'">'+e+"</option>"}),e.join(""))+"</optgroup>")}),c.getBuckets(null,function(t){if(!t)return!1;var n=l.create({server:"http://v0.api.upyun.com/"+t[0].bucket,pick:"#avatar_picker",resize:!0,formData:t[0],auto:!0,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"}});n.on("uploadSuccess",function(e,n){"200"==n.code&&(d.data.avatar=p[t[0].bucket]+n.url)}).on("startUpload",function(){i.App.showPreloader("上传中...")}).on("uploadFinished",function(){i.App.hidePreloader()}).on("uploadError",function(e,t){alert(t)}),r.scan(e.container),e.query.code?d.data.code=e.query.code:i.App.alert("非法验证")})}},function(e,t,n){var i=(n(3),n(9),n(2)),a=n(13),o=null;e.exports=function(e){var t=i(e.container),n=t.find(".page-content");o||(o=a.compile(n.html())),n.html(o({query:JSON.stringify(e.query)}))}},function(e){e.exports=avalon},function(e,t,n){function i(e,t){return r.isPlainObject(t)&&!r.isEmptyObject(t)&&r.each(t,function(t,n){e=e.replace(":"+t,n)}),e}function a(e,t){return function(n,a,o,s){var l=e,u=arguments.callee;return r.isFunction(n)&&(a=n,n=[]),u.hasOwnProperty("_bindParams")&&(l=i(e,u._bindParams),delete u._bindParams),r.ajax(r.extend({dataType:"json",url:/^http/.test(l)?l:c+l,data:n,type:t||"get",beforeSend:function(e,t){return r.isFunction(t._beforeSend)?t._beforeSend.apply(this,[e,t]):void 0},statusCode:{400:function(e){var t;try{t=e.responseJSON,t.error=400,r.isFunction(o)&&o.call(null,t)}catch(n){}},401:function(){var e={message:"Unauthorized"};try{e.error=401,r.isFunction(o)&&o.call(null,e)}catch(t){}},500:function(){alert("服务器开小差了..")},404:function(){alert("访问资源不存在..")}},success:function(e){e&&e.error?r.isFunction(o)&&o.call(null,e):r.isFunction(a)&&a.call(null,e)}},s||{}))}}function o(e){r.isPlainObject(e)&&!r.isEmptyObject(e)?r.each(e,function(e,n){t[e]=a.apply(null,n)}):r.error("error api config")}var r=n(4),c=null,s=/^(www|stage-h2).+$/;c=(s=location.host.match(s))?"http://"+s[1]+".hoolay.cn":"http://h2.hoolay.cc";var l={getAllColleges:["/api/user/default_colleges","get"],getBuckets:["/api/pictures/buckets","get"],codeConfirmation:["/api/user/code_confirmation","get"],codeCompletion:["/api/user/code_completion","post"]};o(l),e.exports.baseUri=c,e.exports._addRoutes=o},function(e){e.exports=[{name:"直辖市",cities:["北京","上海","天津","重庆"]},{name:"广东省",cities:["广州","汕尾","阳江","揭阳","茂名","惠州","江门","韶关","梅州","汕头","深圳","珠海","佛山","肇庆","湛江","中山","河源","清远","云浮","潮州","东莞"]},{name:"河北省",cities:["邯郸","石家庄","保定","张家口","承德","唐山","廊坊","沧州","衡水","邢台"]},{name:"山西省",cities:["朔州","忻州","太原","大同","阳泉","晋中","长治","晋城","临汾","吕梁","运城"]},{name:"内蒙古自治区",cities:["呼伦贝尔","呼和浩特","包头","乌海","乌兰察布","通辽","赤峰","鄂尔多斯","巴彦淖尔","锡林郭勒盟","兴安盟","阿拉善盟"]},{name:"辽宁省",cities:["沈阳","铁岭","大连","鞍山","抚顺","本溪","丹东","锦州","营口","阜新","辽阳","朝阳","盘锦","葫芦岛"]},{name:"吉林省",cities:["长春","吉林","延边朝鲜族自治州","四平","通化","白城","辽源","松原","白山"]},{name:"黑龙江省",cities:["哈尔滨","齐齐哈尔","鸡西","牡丹江","七台河","佳木斯","鹤岗","双鸭山","绥化","黑河","大兴安岭地区","伊春","大庆"]},{name:"江苏省",cities:["南京","无锡","镇江","苏州","南通","扬州","盐城","徐州","淮安","连云港","常州","泰州","宿迁"]},{name:"浙江省",cities:["舟山","衢州","杭州","湖州","嘉兴","宁波","绍兴","温州","丽水","金华","台州"]},{name:"安徽省",cities:["合肥","芜湖","蚌埠","淮南","马鞍山","淮北","铜陵","安庆","黄山","滁州","阜阳","宿州","巢湖","六安","亳州","池州","宣城"]},{name:"福建省",cities:["福州","厦门","宁德","莆田","泉州","漳州","龙岩","三明","南平"]},{name:"江西省",cities:["鹰潭","新余","南昌","九江","上饶","抚州","宜春","吉安","赣州","景德镇","萍乡"]},{name:"山东省",cities:["菏泽","济南","青岛","淄博","德州","烟台","潍坊","济宁","泰安","临沂","滨州","东营","威海","枣庄","日照","莱芜","聊城"]},{name:"河南省",cities:["商丘","郑州","安阳","新乡","许昌","平顶山","信阳","南阳","开封","洛阳","济源","焦作","鹤壁","濮阳","周口","漯河","驻马店","三门峡"]},{name:"湖北省",cities:["武汉","襄樊","鄂州","孝感","黄冈","黄石","咸宁","荆州","宜昌","恩施土家族苗族自治州","神农架林区","十堰","随州","荆门","仙桃","天门","潜江"]},{name:"湖南省",cities:["岳阳","长沙","湘潭","株洲","衡阳","郴州","常德","益阳","娄底","邵阳","湘西土家族苗族自治州","张家界","怀化","永州"]},{name:"海南省",cities:["海口","三亚","五指山","琼海","儋州","文昌","万宁","东方","澄迈县","定安县","屯昌县","临高县","白沙黎族自治县","昌江黎族自治县","乐东黎族自治县","陵水黎族自治县","保亭黎族苗族自治县","琼中黎族苗族自治县"]},{name:"广西壮族自治区",cities:["防城港","南宁","崇左","来宾","柳州","桂林","梧州","贺州","贵港","玉林","百色","钦州","河池","北海"]},{name:"甘肃省",cities:["兰州","金昌","白银","天水","嘉峪关","武威","张掖","平凉","酒泉","庆阳","定西","陇南","临夏回族自治州","甘南藏族自治州"]},{name:"陕西省",cities:["西安","咸阳","延安","榆林","渭南","商洛","安康","汉中","宝鸡","铜川"]},{name:"新疆维吾尔自治区",cities:["塔城地区","哈密地区","和田地区","阿勒泰地区","克孜勒苏柯尔克孜自治州","博尔塔拉蒙古自治州","克拉玛依","乌鲁木齐","石河子","昌吉回族自治州","五家渠","吐鲁番地区","巴音郭楞蒙古自治州","阿克苏地区","阿拉尔","喀什地区","图木舒克","伊犁哈萨克自治州"]},{name:"青海省",cities:["海北藏族自治州","西宁","海东地区","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","玉树藏族自治州","海西蒙古族藏族自治州"]},{name:"宁夏回族自治区",cities:["银川","石嘴山","吴忠","固原","中卫"]},{name:"四川省",cities:["成都","攀枝花","自贡","绵阳","南充","达州","遂宁","广安","巴中","泸州","宜宾","资阳","内江","乐山","眉山","凉山彝族自治州","雅安","甘孜藏族自治州","阿坝藏族羌族自治州","德阳","广元"]},{name:"贵州省",cities:["贵阳","遵义","安顺","黔南布依族苗族自治州","黔东南苗族侗族自治州","铜仁地区","毕节地区","六盘水","黔西南布依族苗族自治州"]},{name:"云南省",cities:["西双版纳傣族自治州","德宏傣族景颇族自治州","昭通","昆明","大理白族自治州","红河哈尼族彝族自治州","曲靖","保山","文山壮族苗族自治州","玉溪","楚雄彝族自治州","普洱","临沧","怒江傈傈族自治州","迪庆藏族自治州","丽江"]},{name:"西藏自治区",cities:["拉萨","日喀则地区","山南地区","林芝地区","昌都地区","那曲地区","阿里地区"]},{name:"台湾省",cities:["台北","高雄","基隆","台中","台南","新竹","嘉义"]},{name:"特别行政区",cities:["澳门特别行政区","香港特别行政区"]}]},function(e){e.exports=WebUploader},function(e){e.exports=Template7},function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}},function(e){e.exports='<div ms-controller="vmUserentry">\n<div class="list-block user-entry-list-block-a">\n  <ul class="user-entry-lists">\n    <li class="item-content avatar-item">\n      <div class="item-inner">\n        <div class="item-title">头像</div>\n        <div class="item-after">\n            <a href="javascript:;" class="thumb-link" id="avatar_picker">\n                <img ms-attr-src="{{( smartAvatar() )}}" alt="" /> \n            </a>  \n        </div>\n      </div>\n    </li>\n    <li>\n      <a href="#" class="item-link smart-select">\n      \n      </a>\n      <div class="item-content">\n        <div class="item-inner">\n          <div class="item-title label">真实姓名</div>\n          <div class="item-input">\n              <input name="name" type="text" ms-duplex="data.name" required />\n          </div>\n        </div>\n      </div>  \n    </li>\n    <li> \n      <a class="item-link smart-select" href="#" data-open-in="popup" data-back-on-select="true">\n          <!-- select -->\n          <select name="gender" ms-duplex="data.gender">\n              <option value="null">保密</option>\n              <option value="m">男</option>\n              <option value="f">女</option>\n          </select>\n          <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">性别</div>\n                <div class="item-after smart-select-value">{{smartGender()}}</div>\n              </div>\n          </div>\n      </a>\n    </li>\n    <li>\n      <a class="item-link smart-select" href="#" data-open-in="popup" data-back-on-select="true">\n          <!-- select -->\n          <select name="location" ms-change="locationSelectHandler">\n          </select>\n          <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">所在地</div>\n                <div class="item-after smart-select-value">未设置</div>\n              </div>\n          </div>\n      </a>\n    </li>\n    <li>\n         <a class="item-link smart-select" href="#" data-open-in="popup" data-back-on-select="true">\n          <!-- select -->\n          <select name="colleges" ms-change="collegesSelectHandler"> \n          </select>\n          <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">毕业院校</div>\n                <div class="item-after smart-select-value">未设置</div>\n              </div>\n          </div>\n      </a>\n    </li>\n     </ul>\n</div>\n<div class="list-block user-entry-list-block-b">\n    <ul>\n        <li>\n          <div class="item-content">\n            <div class="item-inner">\n              <div class="item-title label">手机号</div>\n              <div class="item-input">\n                  <input type="text" pattern="\\d*" ms-duplex="data.phone" name="phone" required />\n              </div>\n            </div>\n          </div>  \n        </li>\n        <li>\n          <div class="item-content">\n            <div class="item-inner">\n              <div class="item-title label">邮箱</div>\n              <div class="item-input">\n                  <input type="email" ms-duplex="data.email" required />\n              </div>\n            </div>\n          </div>  \n        </li>\n        <li>\n          <div class="item-content">\n            <div class="item-inner">\n              <div class="item-title label">密码</div>\n              <div class="item-input">\n                  <input type="password" value="" placeholder="不少于6个字符" ms-duplex="data.password" required /> \n              </div>\n            </div>\n          </div>  \n        </li>\n    </ul>\n</div>\n\n<div class="content-block" style="margin-top:0px;">\n    <a href="javascript:;" class="button button-big button-fill" ms-click="submitHandler"> \n        完成\n    </a>\n</div>\n</div>\n'},function(e){function t(e){this.value=e}function n(e,t,n){var a=[],o=[],r=!0;return function c(e){function s(){if("object"==typeof h.node&&null!==h.node){h.keys&&h.node_===h.node||(h.keys=d(h.node)),h.isLeaf=0==h.keys.length;for(var t=0;t<o.length;t++)if(o[t].node_===e){h.circular=o[t];break}}else h.isLeaf=!0,h.keys=null;h.notLeaf=!h.isLeaf,h.notRoot=!h.isRoot}var l=n?i(e):e,u={},p=!0,h={node:l,node_:e,path:[].concat(a),parent:o[o.length-1],parents:o,key:a.slice(-1)[0],isRoot:0===a.length,level:a.length,circular:null,update:function(e,t){h.isRoot||(h.parent.node[h.key]=e),h.node=e,t&&(p=!1)},"delete":function(e){delete h.parent.node[h.key],e&&(p=!1)},remove:function(e){f(h.parent.node)?h.parent.node.splice(h.key,1):delete h.parent.node[h.key],e&&(p=!1)},keys:null,before:function(e){u.before=e},after:function(e){u.after=e},pre:function(e){u.pre=e},post:function(e){u.post=e},stop:function(){r=!1},block:function(){p=!1}};if(!r)return h;s();var y=t.call(h,h.node);return void 0!==y&&h.update&&h.update(y),u.before&&u.before.call(h,h.node),p?("object"!=typeof h.node||null===h.node||h.circular||(o.push(h),s(),m(h.keys,function(e,t){a.push(e),u.pre&&u.pre.call(h,h.node[e],e);var i=c(h.node[e]);n&&v.call(h.node,e)&&(h.node[e]=i.node),i.isLast=t==h.keys.length-1,i.isFirst=0==t,u.post&&u.post.call(h,i),a.pop()}),o.pop()),u.after&&u.after.call(h,h.node),h):h}(e).node}function i(e){if("object"==typeof e&&null!==e){var t;if(f(e))t=[];else if(o(e))t=new Date(e.getTime?e.getTime():e);else if(r(e))t=new RegExp(e);else if(c(e))t={message:e.message};else if(s(e))t=new Boolean(e);else if(l(e))t=new Number(e);else if(u(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},i=function(){};i.prototype=n,t=new i}return m(d(e),function(n){t[n]=e[n]}),t}return e}function a(e){return Object.prototype.toString.call(e)}function o(e){return"[object Date]"===a(e)}function r(e){return"[object RegExp]"===a(e)}function c(e){return"[object Error]"===a(e)}function s(e){return"[object Boolean]"===a(e)}function l(e){return"[object Number]"===a(e)}function u(e){return"[object String]"===a(e)}var p=e.exports=function(e){return new t(e)};t.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var i=e[n];if(!t||!v.call(t,i)){t=void 0;break}t=t[i]}return t},t.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var i=e[n];if(!t||!v.call(t,i))return!1;t=t[i]}return!0},t.prototype.set=function(e,t){for(var n=this.value,i=0;i<e.length-1;i++){var a=e[i];v.call(n,a)||(n[a]={}),n=n[a]}return n[e[i]]=t,t},t.prototype.map=function(e){return n(this.value,e,!0)},t.prototype.forEach=function(e){return this.value=n(this.value,e,!1),this.value},t.prototype.reduce=function(e,t){var n=1===arguments.length,i=n?this.value:t;return this.forEach(function(t){this.isRoot&&n||(i=e.call(this,i,t))}),i},t.prototype.paths=function(){var e=[];return this.forEach(function(){e.push(this.path)}),e},t.prototype.nodes=function(){var e=[];return this.forEach(function(){e.push(this.node)}),e},t.prototype.clone=function(){var e=[],t=[];return function n(a){for(var o=0;o<e.length;o++)if(e[o]===a)return t[o];if("object"==typeof a&&null!==a){var r=i(a);return e.push(a),t.push(r),m(d(a),function(e){r[e]=n(a[e])}),e.pop(),t.pop(),r}return a}(this.value)};var d=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},m=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};m(d(t.prototype),function(e){p[e]=function(n){var i=[].slice.call(arguments,1),a=new t(n);return a[e].apply(a,i)}});var v=Object.hasOwnProperty||function(e,t){return t in e}}]);